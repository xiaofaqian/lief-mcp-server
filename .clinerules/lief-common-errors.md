## Brief overview
这些规则记录了在使用 LIEF 库开发 MCP 工具时容易遇到的常见错误和解决方案，特别是针对枚举对象处理、类型转换等问题的最佳实践。

## LIEF 枚举对象处理
- 避免直接将 LIEF 枚举对象转换为整数，如 `int(header.cpu_type)` 或 `hex(header.magic)`
- 使用 `str()` 方法获取枚举对象的字符串表示，如 `str(header.cpu_type)`
- 枚举对象包含完整的类型路径，如 "CPU_TYPE.X86_64" 或 "MACHO_TYPES.MAGIC_64"
- 在比较或判断时使用字符串包含检查，如 `"64" in str(header.magic)` 而不是数值比较

## 错误处理策略
- 为每个可能失败的 LIEF 操作添加 try-catch 块
- 在解析单个架构时捕获异常，避免整个工具失败
- 提供有意义的错误信息，包含具体的错误原因和建议
- 使用渐进式错误处理，先处理能成功的部分，再报告失败的部分

## 类型安全实践
- 在访问 LIEF 对象属性前检查属性是否存在，使用 `hasattr()`
- 对于可能不存在的属性提供默认值或跳过处理
- 避免假设所有 Mach-O 文件都有相同的属性结构
- 在函数参数中明确类型注解，特别是处理 LIEF 对象时

## 调试和测试方法
- 使用简单的测试脚本验证 LIEF 对象的实际类型和属性
- 在开发新工具时先用已知的二进制文件（如 /bin/ls）进行测试
- 逐步添加功能，每次只处理一个属性或字段
- 使用 `type()` 和 `dir()` 函数探索 LIEF 对象的结构

## 代码复用原则
- 参考现有工具的实现方式，特别是枚举对象的处理方法
- 保持一致的错误处理模式和返回结构
- 复用已验证的辅助函数，如字符串转换和描述映射
- 在添加新工具前检查现有工具的实现模式
